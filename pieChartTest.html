<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pie Chart</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>

<body>
<div id="pie">
</div>
<div class="buttons" style="width: 300px; text-align: center;">
    <button id="a" style="width: 50px;">A</button>
    <button id="b" style="width: 50px;">B</button>
    <button id="c" style="width: 50px;">C</button>
</div>

<script>
    var data = [{"letter":"A","presses":1},{"letter":"B","presses":1},{"letter":"C","presses":1}];
    console.log(data);

    var width = 300,
        height = 300,
        radius = Math.min(width, height) / 2;
        iRadius = 100;

    var color = d3.scaleOrdinal()
        .range(["#2C93E8","#838690","#F56C4E"]);

    var pie = d3.pie()
        .value(function (d) {return d.presses;}) (data);

    var arc = d3.arc()
        .outerRadius(radius - 10 )
        .innerRadius(iRadius);

    var labelArc = d3.arc()
        .outerRadius(radius - 40)
        .innerRadius(radius - 40);

    var svg = d3.select("#pie")
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g")
        .attr("transform", "translate(" + width/2 + "," + height/2 + ")");

    var g = svg.selectAll("arc")
        .data(pie)
        .enter().append("g")
        .attr("class", "arc");

    g.append("path")
        .attr("d", arc)
        .style("fill", function (d) {
            return color(d.data.letter);})
        .each(function (d) {
            this._current = d;});

    g.append("text")
        .attr("transform", function (d) {
            return "translate(" + labelArc.centroid(d) + ")";})
        .text(function (d) {
            return d.data.letter;})
        .style("fill", "#fff")
        .each(function (d) {
            this._current = d;});

    function arcTween(a) {
        var i = d3.interpolate(this._current, a);
        this._current = i(0);
        return function (t) {
            return arc(i(t));
        };
    }

    function labelarcTween(a) {
        var i = d3.interpolate(this._current, a);
        this._current = i(0);
        return function (t) {
            return "translate(" + labelArc.centroid(i(t)) + ")";
        };
    }


    function change() {
        var pie = d3.pie()
            .value(function (d) {
                return d.presses;
            }) (data);

        var path = d3.select("#pie").selectAll("path").data(pie);
        //path.attr("d", arc);
        path.transition().duration(500).attrTween("d" ,arcTween);

//        d3.selectAll("text").data(pie).attr("transform", function (d) {
//            return "translate(" + labelArc.centroid(d) + ")";
//        });

        d3.selectAll("text").data(pie).transition().duration(500).attrTween("transform", labelarcTween);
    }

    d3.select("button#a")
        .on("click", function () {
            data[0].presses++;
            change();
        })

    d3.select("button#b")
        .on("click", function () {
            data[1].presses++;
            change();
        })

    d3.select("button#c")
        .on("click", function () {
            data[2].presses++;
            change();
        })
</script>
</body>
</html>